<template>
  <div id="app">

    <v-app id="inspire">
      <v-text-field
          append-icon="search"
          class="searchfield"
          v-model="search"
          label="Suchen"
          single-line
          hide-details>
      </v-text-field>
      <v-data-table
          :headers="hazardsHeader"
          :items="hazardsSliced"
          :search="search"
          :sort-by.sync="sortBy"
          :sort-desc.sync="sortDesc"
          :expanded.sync="expanded"
          :single-expand="true"
          :footer-props="{
              showFirstLastPage: true,
              'items-per-page-text':'Gefährdungen pro Seite',
              'items-per-page-all-text':'Alle', }"
          show-expand
          class="elevation-1"
          no-results-text="Keine übereinstimmenden Daten gefunden."
          no-data-text="Keine Daten gefunden">

        <!--add risikoprioritätszahl--row-->
        <template v-slot:item.riskPriority="{ item }">
          <div v-if="item.riskPriority === '1 gering'" :class="`dot greenCustomized`"></div>
          <div v-if="item.riskPriority === '2 mittel'" :class="`dot yellowCustomized`"></div>
          <div v-if="item.riskPriority === '3 hoch'" :class="`dot redCustomized`"></div>
        </template>
        <!--Set checkbox for nicht-zutreffend-row-->
        <template v-slot:item.nicht-zutreffend="{item}">
          <input :id="`confirm${item.id}`" :ref="`confirm${item.id}`"
                 @click="numberOfCheckedCheckboxes(item.id, false, false, false)"
                 type="checkbox" :checked="itemIdPartOfCheckedCheckboxesArray(item.id)"/>
          <label class="checkbox" :for="`confirm${item.id}`"></label>
        </template>
        <!--Add different icon per row in icon-row-->
        <template v-slot:item.icon="{item}">
          <img class="icon_list" :src="`${item.imageName}`" alt="icon"/>
        </template>
        <!--add Checkmark and tooltip to akzeptiert-row-->
        <template v-slot:item.akzeptiert="{item}">
          <div ref="submit" :id="`acceptedDiv${item.id}`" class="tooltip expand akzeptiert-status"
               data-title="Akzeptiert-Status"
               @click="moveCheckmark(item.id, 'acceptedDiv', 'apply-shake', 820)">
            <svg class="accepted_status" :id="`accepted${item.id}`" width="17" height="15" viewBox="0 0 17 15"
                 fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 1L5.6875 14L1 8.09091" stroke="#4C5A69" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round"
                    :stroke-opacity="itemIdPartOfacceptCounterArray(item.id, 'checkedCheckboxesArray', '1.0', '0.2')"/>
            </svg>
          </div>
        </template>

        <!--Expanded informations-->
        <template v-slot:expanded-item="{ headers, item }">
          <td class="td_detailView" :colspan="headers.length ">
            <form class="form_detailView">
              <div class='title_with_image_container'>
                <div class='title_with_image_square'>
                  <div class='title_detail_view'> {{ item.hazardDetailDescription }}
                  </div>
                  <div class='image_detail_view'><img :src="`${item.imageName}`" width='89' height='auto'>
                  </div>
                </div>
              </div>

              <div class='blocks'>
                <div class='block'>
                  <div class='block-title'>Schaden</div>
                  <div class='block-text'>
                    <ul>
                      <li>{{ item.damage }}</li>
                    </ul>
                  </div>
                </div>

                <div class='block'>
                  <div class='block-title'>Massnahmen zur Risikominderung</div>
                  <div class='block-text'>
                    <ul>
                      <li v-for="measure in item.measures" :key="measure.description">{{ measure.description }}</li>
                    </ul>
                  </div>
                </div>

                <div class='block block-effects'>
                  <div class='block-title'>Auswirkungen der Risikominderung</div>
                  <div class="graphic-selection">
                    <div class="graphic-selection-block">Darstellungsart wählen:</div>
                    <div class="graphic-selection-block">
                      <input :id="`pictogram`" type="checkbox" v-model="pictogram"/>
                      <label :for="`pictogram`">Piktogramm</label>
                    </div>
                    <div class="graphic-selection-block">
                      <input :id="`rM`" type="checkbox" v-model="riskMatrix"/>
                      <label :for="`rM`">Risikomatrix</label>
                    </div>
                  </div>
                  <div class='block-graphics'>
                    <div class="pictogramm" v-if="pictogram">
                      <div class="pictogram-title"> Piktogramm</div>
                      <div class="pictogram-description">
                        <p>Die Höhe des Risikos berechnet sich aus der Eintretenswahrscheinlichkeit und dem Schweregrad,
                          wobei 5 der Maximalwert darstellt.</p>
                      </div>
                      <div class="pictogram-graphic">
                        <div class="pictogram-graphic-block" v-for="pictogram in pictogramRows"
                             :key="pictogram.pictogramRow">
                          <div class="pictogram-graphic-block-title">{{ pictogram.title }}</div>
                          <div class="pictogram-graphic-block-svgs">
                            <div class="pictogram-graphic-block-svgs-block">
                              <div class="pictogram-graphic-block-svgs-block-row tooltip expand pictogram-tooltip"
                                   :data-title="`Eintretenswahrscheinlichkeit : ${item.probabilityOfOccurrenceBefore} von 5`"
                                   v-if="pictogram.pictogramRow === 1">
                                <div class="pictogram-graphic-block-svgs-block-row-column" v-for="svg in svgList"
                                     :key="svg.svgNumber">
                                  <svg :id="`${svg.svgNumber}`" width="30" height="29" viewBox="0 0 30 29" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M19.294 14.9269L20.5797 13.0075L22.5246 10.7198C22.7489 10.4559 22.9514 10.1744 23.1302 9.87781L23.557 9.16973C23.7564 8.83905 23.9123 8.48405 24.0209 8.11351C24.1052 7.82562 24.1605 7.53001 24.186 7.23109L24.2364 6.63863C24.3142 5.72561 24.1469 4.80838 23.752 3.98154C23.359 3.15885 22.7548 2.45521 22.0009 1.94248L20.6626 1.03234L20.1188 0.744422C19.1954 0.255567 18.1664 0 17.1216 0H15.9329H14.7347C14.2352 0 13.7374 0.0584201 13.2515 0.174069L12.0744 0.454229L10.5198 1.04366C9.81911 1.30934 9.17046 1.69591 8.60336 2.18579L7.91789 2.77792C7.48279 3.15378 7.10534 3.5916 6.79768 4.07732C6.31155 4.84478 6.01044 5.71472 5.91809 6.61848L5.82867 7.49366C5.81603 7.61733 5.82506 7.74227 5.85535 7.86284C5.97477 8.33829 6.40221 8.67164 6.89242 8.67164H8.92125H11.1785C11.5629 8.67164 11.9283 8.50411 12.1791 8.2128C12.2474 8.13357 12.306 8.04651 12.3537 7.95345L12.7807 7.12043C13.1257 6.44732 13.7214 5.93668 14.4393 5.6985C15.1687 5.34721 16.0457 5.60754 16.4653 6.29995L16.5847 6.49688C17.0088 7.19678 16.9152 8.09345 16.3557 8.69069L14.4393 10.7363L13.6795 11.4925C13.2478 11.9222 12.8796 12.4112 12.586 12.9448L12.0744 13.8746L11.5557 14.911C11.4512 15.12 11.5398 15.374 11.7516 15.4727C11.8268 15.5077 11.9107 15.5193 11.9926 15.5061L12.4727 15.4288C13.001 15.3438 13.4511 14.9987 13.6704 14.5106L13.7464 14.3415C13.9567 13.8733 14.4223 13.5721 14.9355 13.5721C15.5135 13.5721 16.0225 13.9527 16.186 14.507L16.2034 14.5662C16.3068 14.9168 16.5444 15.2123 16.8646 15.3885L17.0279 15.4784C17.6653 15.8293 18.4544 15.7426 19.0005 15.2618C19.1124 15.1633 19.211 15.0507 19.294 14.9269Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceBefore, svg.svgNumber, 1)"/>
                                    <path
                                        d="M9.75059 17.9626L8.63038 16.476L10.5804 14.6178L11.908 15.3198L13.1527 14.9482L13.6091 13.2551H16.5133L16.7622 14.9482L18.1314 15.6502L19.6665 14.6178L21.575 16.476L20.6622 18.1278L21.1186 19.284L22.8196 19.7382V22.5875L21.1186 22.9591L20.6622 24.2392L21.575 25.4367L19.459 27.6253L18.1314 26.7581L16.7622 27.2123L16.5133 28.7815H13.6091L13.3186 26.9646L11.908 26.3039L10.4559 27.3775L8.63038 25.2302L9.75059 24.0327L9.08676 22.5875L7.30273 22.381V19.7382L9.08676 19.4492L9.75059 17.9626Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceBefore, svg.svgNumber, 2)"/>
                                    <ellipse cx="15.0606" cy="21.0595" rx="3.85848" ry="3.8403" fill="white"/>
                                    <path
                                        d="M4.46568 15.3162L4.86008 14.7274L5.50005 13.9746C5.57385 13.8878 5.6405 13.7951 5.69932 13.6975L5.83978 13.4646C5.90538 13.3557 5.95667 13.2389 5.9924 13.117C6.02016 13.0223 6.03837 12.925 6.04674 12.8267L6.06334 12.6317C6.08892 12.3313 6.03389 12.0295 5.90394 11.7574C5.77463 11.4867 5.57579 11.2552 5.32773 11.0864L4.88739 10.787L4.70843 10.6922C4.40459 10.5314 4.06601 10.4473 3.72222 10.4473H3.33107H2.93681C2.77245 10.4473 2.60866 10.4665 2.44877 10.5045L2.06144 10.5967L1.5499 10.7907C1.31934 10.8781 1.1059 11.0053 0.919293 11.1665L0.693741 11.3613C0.550571 11.485 0.426372 11.6291 0.325135 11.7889C0.165176 12.0414 0.0660947 12.3277 0.0357093 12.6251L0.00628503 12.913C0.00212687 12.9537 0.00509743 12.9948 0.0150632 13.0345C0.05436 13.191 0.195006 13.3007 0.356312 13.3007H1.02389H1.76663C1.89313 13.3007 2.01335 13.2455 2.0959 13.1497C2.11835 13.1236 2.13763 13.095 2.15333 13.0643L2.29384 12.7902C2.40738 12.5688 2.60337 12.4007 2.8396 12.3224C3.07962 12.2068 3.36819 12.2924 3.50626 12.5203L3.54553 12.5851C3.6851 12.8154 3.65431 13.1104 3.4702 13.3069L2.8396 13.98L2.57318 14.2452C2.44202 14.3757 2.33015 14.5243 2.24094 14.6865L2.15964 14.8342C2.09476 14.9521 2.05283 15.0813 2.03606 15.2148L2.00798 15.4383C1.99836 15.515 2.01311 15.5927 2.05015 15.6604C2.11605 15.781 2.24368 15.8548 2.38105 15.8517L3.53689 15.8255C3.82383 15.819 4.09795 15.7054 4.30533 15.507C4.36554 15.4494 4.41931 15.3854 4.46568 15.3162Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceBefore, svg.svgNumber, 1)"/>
                                    <ellipse cx="3.06892" cy="17.0544" rx="1.16169" ry="1.15622"
                                             :fill="pictogramIconColor(item.probabilityOfOccurrenceBefore, svg.svgNumber, 1)"/>
                                    <path
                                        d="M28.3641 15.3989L28.7585 14.8101L29.3985 14.0574C29.4723 13.9705 29.5389 13.8779 29.5978 13.7803L29.7382 13.5473C29.8038 13.4385 29.8551 13.3217 29.8908 13.1998C29.9186 13.105 29.9368 13.0078 29.9452 12.9094L29.9618 12.7145C29.9874 12.414 29.9323 12.1122 29.8024 11.8402C29.6731 11.5694 29.4742 11.3379 29.2262 11.1692L28.7858 10.8697L28.6069 10.775C28.303 10.6141 27.9645 10.53 27.6207 10.53H27.2295H26.8352C26.6709 10.53 26.5071 10.5493 26.3472 10.5873L25.9599 10.6795L25.4483 10.8734C25.2178 10.9609 25.0043 11.0881 24.8177 11.2493L24.5922 11.4441C24.449 11.5678 24.3248 11.7118 24.2236 11.8717C24.0636 12.1242 23.9645 12.4105 23.9341 12.7078L23.9047 12.9958C23.9006 13.0365 23.9035 13.0776 23.9135 13.1173C23.9528 13.2737 24.0934 13.3834 24.2547 13.3834H24.9223H25.6651C25.7916 13.3834 25.9118 13.3283 25.9943 13.2324C26.0168 13.2064 26.0361 13.1777 26.0518 13.1471L26.1923 12.873C26.3058 12.6515 26.5018 12.4835 26.738 12.4051C26.9781 12.2895 27.2666 12.3752 27.4047 12.603L27.444 12.6678C27.5835 12.8981 27.5527 13.1932 27.3686 13.3897L26.738 14.0628L26.4716 14.328C26.3405 14.4585 26.2286 14.6071 26.1394 14.7692L26.0581 14.917C25.9932 15.0349 25.9513 15.164 25.9345 15.2976L25.9064 15.5211C25.8968 15.5977 25.9116 15.6754 25.9486 15.7432C26.0145 15.8638 26.1421 15.9375 26.2795 15.9344L27.4353 15.9083C27.7223 15.9018 27.9964 15.7882 28.2038 15.5898C28.264 15.5321 28.3177 15.4682 28.3641 15.3989Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceBefore, svg.svgNumber, 1)"/>
                                    <ellipse cx="26.9683" cy="17.1368" rx="1.16169" ry="1.15622"
                                             :fill="pictogramIconColor(item.probabilityOfOccurrenceBefore, svg.svgNumber, 1)"/>
                                  </svg>
                                </div>
                              </div>
                              <div class="pictogram-graphic-block-svgs-block-row tooltip expand pictogram-tooltip"
                                   :data-title="`Eintretenswahrscheinlichkeit : ${item.probabilityOfOccurrenceAfter} von 5`"
                                   v-if="pictogram.pictogramRow === 2">
                                <div class="pictogram-graphic-block-svgs-block-row-column" v-for="svg in svgList"
                                     :key="svg.svgNumber">
                                  <svg :id="`${svg.svgNumber}`" width="30" height="29" viewBox="0 0 30 29" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M19.294 14.9269L20.5797 13.0075L22.5246 10.7198C22.7489 10.4559 22.9514 10.1744 23.1302 9.87781L23.557 9.16973C23.7564 8.83905 23.9123 8.48405 24.0209 8.11351C24.1052 7.82562 24.1605 7.53001 24.186 7.23109L24.2364 6.63863C24.3142 5.72561 24.1469 4.80838 23.752 3.98154C23.359 3.15885 22.7548 2.45521 22.0009 1.94248L20.6626 1.03234L20.1188 0.744422C19.1954 0.255567 18.1664 0 17.1216 0H15.9329H14.7347C14.2352 0 13.7374 0.0584201 13.2515 0.174069L12.0744 0.454229L10.5198 1.04366C9.81911 1.30934 9.17046 1.69591 8.60336 2.18579L7.91789 2.77792C7.48279 3.15378 7.10534 3.5916 6.79768 4.07732C6.31155 4.84478 6.01044 5.71472 5.91809 6.61848L5.82867 7.49366C5.81603 7.61733 5.82506 7.74227 5.85535 7.86284C5.97477 8.33829 6.40221 8.67164 6.89242 8.67164H8.92125H11.1785C11.5629 8.67164 11.9283 8.50411 12.1791 8.2128C12.2474 8.13357 12.306 8.04651 12.3537 7.95345L12.7807 7.12043C13.1257 6.44732 13.7214 5.93668 14.4393 5.6985C15.1687 5.34721 16.0457 5.60754 16.4653 6.29995L16.5847 6.49688C17.0088 7.19678 16.9152 8.09345 16.3557 8.69069L14.4393 10.7363L13.6795 11.4925C13.2478 11.9222 12.8796 12.4112 12.586 12.9448L12.0744 13.8746L11.5557 14.911C11.4512 15.12 11.5398 15.374 11.7516 15.4727C11.8268 15.5077 11.9107 15.5193 11.9926 15.5061L12.4727 15.4288C13.001 15.3438 13.4511 14.9987 13.6704 14.5106L13.7464 14.3415C13.9567 13.8733 14.4223 13.5721 14.9355 13.5721C15.5135 13.5721 16.0225 13.9527 16.186 14.507L16.2034 14.5662C16.3068 14.9168 16.5444 15.2123 16.8646 15.3885L17.0279 15.4784C17.6653 15.8293 18.4544 15.7426 19.0005 15.2618C19.1124 15.1633 19.211 15.0507 19.294 14.9269Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceAfter, svg.svgNumber, 1)"/>
                                    <path
                                        d="M9.75059 17.9626L8.63038 16.476L10.5804 14.6178L11.908 15.3198L13.1527 14.9482L13.6091 13.2551H16.5133L16.7622 14.9482L18.1314 15.6502L19.6665 14.6178L21.575 16.476L20.6622 18.1278L21.1186 19.284L22.8196 19.7382V22.5875L21.1186 22.9591L20.6622 24.2392L21.575 25.4367L19.459 27.6253L18.1314 26.7581L16.7622 27.2123L16.5133 28.7815H13.6091L13.3186 26.9646L11.908 26.3039L10.4559 27.3775L8.63038 25.2302L9.75059 24.0327L9.08676 22.5875L7.30273 22.381V19.7382L9.08676 19.4492L9.75059 17.9626Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceAfter, svg.svgNumber, 2)"/>
                                    <ellipse cx="15.0606" cy="21.0595" rx="3.85848" ry="3.8403" fill="white"/>
                                    <path
                                        d="M4.46568 15.3162L4.86008 14.7274L5.50005 13.9746C5.57385 13.8878 5.6405 13.7951 5.69932 13.6975L5.83978 13.4646C5.90538 13.3557 5.95667 13.2389 5.9924 13.117C6.02016 13.0223 6.03837 12.925 6.04674 12.8267L6.06334 12.6317C6.08892 12.3313 6.03389 12.0295 5.90394 11.7574C5.77463 11.4867 5.57579 11.2552 5.32773 11.0864L4.88739 10.787L4.70843 10.6922C4.40459 10.5314 4.06601 10.4473 3.72222 10.4473H3.33107H2.93681C2.77245 10.4473 2.60866 10.4665 2.44877 10.5045L2.06144 10.5967L1.5499 10.7907C1.31934 10.8781 1.1059 11.0053 0.919293 11.1665L0.693741 11.3613C0.550571 11.485 0.426372 11.6291 0.325135 11.7889C0.165176 12.0414 0.0660947 12.3277 0.0357093 12.6251L0.00628503 12.913C0.00212687 12.9537 0.00509743 12.9948 0.0150632 13.0345C0.05436 13.191 0.195006 13.3007 0.356312 13.3007H1.02389H1.76663C1.89313 13.3007 2.01335 13.2455 2.0959 13.1497C2.11835 13.1236 2.13763 13.095 2.15333 13.0643L2.29384 12.7902C2.40738 12.5688 2.60337 12.4007 2.8396 12.3224C3.07962 12.2068 3.36819 12.2924 3.50626 12.5203L3.54553 12.5851C3.6851 12.8154 3.65431 13.1104 3.4702 13.3069L2.8396 13.98L2.57318 14.2452C2.44202 14.3757 2.33015 14.5243 2.24094 14.6865L2.15964 14.8342C2.09476 14.9521 2.05283 15.0813 2.03606 15.2148L2.00798 15.4383C1.99836 15.515 2.01311 15.5927 2.05015 15.6604C2.11605 15.781 2.24368 15.8548 2.38105 15.8517L3.53689 15.8255C3.82383 15.819 4.09795 15.7054 4.30533 15.507C4.36554 15.4494 4.41931 15.3854 4.46568 15.3162Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceAfter, svg.svgNumber, 1)"/>
                                    <ellipse cx="3.06892" cy="17.0544" rx="1.16169" ry="1.15622"
                                             :fill="pictogramIconColor(item.probabilityOfOccurrenceAfter, svg.svgNumber, 1)"/>
                                    <path
                                        d="M28.3641 15.3989L28.7585 14.8101L29.3985 14.0574C29.4723 13.9705 29.5389 13.8779 29.5978 13.7803L29.7382 13.5473C29.8038 13.4385 29.8551 13.3217 29.8908 13.1998C29.9186 13.105 29.9368 13.0078 29.9452 12.9094L29.9618 12.7145C29.9874 12.414 29.9323 12.1122 29.8024 11.8402C29.6731 11.5694 29.4742 11.3379 29.2262 11.1692L28.7858 10.8697L28.6069 10.775C28.303 10.6141 27.9645 10.53 27.6207 10.53H27.2295H26.8352C26.6709 10.53 26.5071 10.5493 26.3472 10.5873L25.9599 10.6795L25.4483 10.8734C25.2178 10.9609 25.0043 11.0881 24.8177 11.2493L24.5922 11.4441C24.449 11.5678 24.3248 11.7118 24.2236 11.8717C24.0636 12.1242 23.9645 12.4105 23.9341 12.7078L23.9047 12.9958C23.9006 13.0365 23.9035 13.0776 23.9135 13.1173C23.9528 13.2737 24.0934 13.3834 24.2547 13.3834H24.9223H25.6651C25.7916 13.3834 25.9118 13.3283 25.9943 13.2324C26.0168 13.2064 26.0361 13.1777 26.0518 13.1471L26.1923 12.873C26.3058 12.6515 26.5018 12.4835 26.738 12.4051C26.9781 12.2895 27.2666 12.3752 27.4047 12.603L27.444 12.6678C27.5835 12.8981 27.5527 13.1932 27.3686 13.3897L26.738 14.0628L26.4716 14.328C26.3405 14.4585 26.2286 14.6071 26.1394 14.7692L26.0581 14.917C25.9932 15.0349 25.9513 15.164 25.9345 15.2976L25.9064 15.5211C25.8968 15.5977 25.9116 15.6754 25.9486 15.7432C26.0145 15.8638 26.1421 15.9375 26.2795 15.9344L27.4353 15.9083C27.7223 15.9018 27.9964 15.7882 28.2038 15.5898C28.264 15.5321 28.3177 15.4682 28.3641 15.3989Z"
                                        :fill="pictogramIconColor(item.probabilityOfOccurrenceAfter, svg.svgNumber, 1)"/>
                                    <ellipse cx="26.9683" cy="17.1368" rx="1.16169" ry="1.15622"
                                             :fill="pictogramIconColor(item.probabilityOfOccurrenceAfter, svg.svgNumber, 1)"/>
                                  </svg>
                                </div>
                              </div>
                              <div class="pictogram-graphic-block-svgs-block-row">
                                <div class="pictogram-graphic-block-svgs-block-description">
                                  Eintretenswahrscheinlichkeit
                                </div>
                              </div>
                            </div>

                            <div class="pictogram-graphic-block-svgs-block">
                              <div class="pictogram-graphic-block-svgs-block-row tooltip expand pictogram-tooltip"
                                   :data-title="`Schweregrad : ${item.severity} von 5`">
                                <div class="pictogram-graphic-block-svgs-block-row-column">
                                  <svg width="30" height="24" viewBox="0 0 30 24" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.51172 9.66589C10.2127 5.8016 17.8533 3.70303 22.2543 9.31193"
                                          :stroke="pictogramIconColor(item.severity, 1, 1)"
                                          stroke-width="0.637602"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56788 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56166 22.0147 7.44244 22.1197 7.3282 22.2204C7.11686 22.4066 6.92257 22.5778 6.77845 22.716C6.37137 23.1063 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33893 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 1, 1)" stroke-width="0.807629"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56789 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56165 22.0147 7.44242 22.1197 7.32818 22.2204C7.11684 22.4066 6.92256 22.5778 6.77845 22.716C6.37137 23.1064 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33894 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 1, 1)" stroke-width="0.807629"/>
                                    <line y1="-0.425068" x2="5.47897" y2="-0.425068"
                                          transform="matrix(-0.466409 -0.884569 0.899813 -0.436276 12.147 6.75256)"
                                          :stroke="pictogramIconColor(item.severity, 1, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.2971" y2="-0.425068"
                                          transform="matrix(0.611069 -0.791577 0.815438 0.578845 20.1543 7.40607)"
                                          :stroke="pictogramIconColor(item.severity, 1, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.41771" y2="-0.425068"
                                          transform="matrix(-0.985293 -0.170873 0.18533 -0.982676 7.48975 11.4901)"
                                          :stroke="pictogramIconColor(item.severity, 1, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.4088" y2="-0.425068"
                                          transform="matrix(-0.923922 0.382581 -0.410602 -0.911815 28.3877 9.80206)"
                                          :stroke="pictogramIconColor(item.severity, 1, 1)" stroke-width="0.850136"/>
                                    <ellipse cx="15.6682" cy="13.1239" rx="4.42943" ry="4.24752"
                                             :fill="pictogramIconColor(item.severity, 1, 2)"/>
                                    <path
                                        d="M5.40409 18.0048C4.48585 18.172 3.97084 16.9779 4.74399 16.4743L11.6791 11.957C12.1264 11.6657 12.7428 11.854 12.9554 12.347L14.2569 15.3646C14.4695 15.8576 14.1719 16.4084 13.6407 16.5051L5.40409 18.0048Z"
                                        :fill="pictogramIconColor(item.severity, 1, 2)"/>
                                  </svg>
                                </div>
                                <div class="pictogram-graphic-block-svgs-block-row-column">
                                  <svg width="31" height="24" viewBox="0 0 31 24" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.51172 9.66589C10.2127 5.8016 17.8533 3.70303 22.2543 9.31193"
                                          :stroke="pictogramIconColor(item.severity, 2, 1)"
                                          stroke-width="0.637602"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56788 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56166 22.0147 7.44244 22.1197 7.3282 22.2204C7.11686 22.4066 6.92257 22.5778 6.77845 22.716C6.37137 23.1063 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33893 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 2, 1)" stroke-width="0.807629"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56789 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56165 22.0147 7.44242 22.1197 7.32818 22.2204C7.11684 22.4066 6.92256 22.5778 6.77845 22.716C6.37137 23.1064 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33894 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 2, 1)" stroke-width="0.807629"/>
                                    <line y1="-0.425068" x2="5.47897" y2="-0.425068"
                                          transform="matrix(-0.466409 -0.884569 0.899813 -0.436276 12.147 6.75256)"
                                          :stroke="pictogramIconColor(item.severity, 2, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.2971" y2="-0.425068"
                                          transform="matrix(0.611069 -0.791577 0.815438 0.578845 20.1543 7.40607)"
                                          :stroke="pictogramIconColor(item.severity, 2, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.41771" y2="-0.425068"
                                          transform="matrix(-0.985293 -0.170873 0.18533 -0.982676 7.48975 11.4901)"
                                          :stroke="pictogramIconColor(item.severity, 2, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.4088" y2="-0.425068"
                                          transform="matrix(-0.923922 0.382581 -0.410602 -0.911815 28.3877 9.80206)"
                                          :stroke="pictogramIconColor(item.severity, 2, 1)" stroke-width="0.850136"/>
                                    <ellipse cx="15.7629" cy="13.121" rx="4.56662" ry="4.24663"
                                             :fill="pictogramIconColor(item.severity, 2, 2)"/>
                                    <path
                                        d="M5.96839 8.14976C5.3585 7.52931 6.0979 6.54643 6.93376 6.8665L14.5449 9.78092C15.0414 9.97106 15.2129 10.5471 14.8977 10.9661L12.84 13.7013C12.5248 14.1204 11.8841 14.168 11.5218 13.7994L5.96839 8.14976Z"
                                        :fill="pictogramIconColor(item.severity, 2, 2)"/>
                                  </svg>
                                </div>
                                <div class="pictogram-graphic-block-svgs-block-row-column">
                                  <svg width="30" height="25" viewBox="0 0 30 25" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.51172 9.66589C10.2127 5.8016 17.8533 3.70303 22.2543 9.31193"
                                          :stroke="pictogramIconColor(item.severity, 3, 1)"
                                          stroke-width="0.637602"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56788 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56166 22.0147 7.44244 22.1197 7.3282 22.2204C7.11686 22.4066 6.92257 22.5778 6.77845 22.716C6.37137 23.1063 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33893 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 3, 1)" stroke-width="0.807629"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56789 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56165 22.0147 7.44242 22.1197 7.32818 22.2204C7.11684 22.4066 6.92256 22.5778 6.77845 22.716C6.37137 23.1064 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33894 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 3, 1)" stroke-width="0.807629"/>
                                    <line y1="-0.425068" x2="5.47897" y2="-0.425068"
                                          transform="matrix(-0.466409 -0.884569 0.899813 -0.436276 12.147 6.75256)"
                                          :stroke="pictogramIconColor(item.severity, 3, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.2971" y2="-0.425068"
                                          transform="matrix(0.611069 -0.791577 0.815438 0.578845 20.1543 7.40607)"
                                          :stroke="pictogramIconColor(item.severity, 3, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.41771" y2="-0.425068"
                                          transform="matrix(-0.985293 -0.170873 0.18533 -0.982676 7.48975 11.4901)"
                                          :stroke="pictogramIconColor(item.severity, 3, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.4088" y2="-0.425068"
                                          transform="matrix(-0.923922 0.382581 -0.410602 -0.911815 28.3877 9.80206)"
                                          :stroke="pictogramIconColor(item.severity, 3, 1)" stroke-width="0.850136"/>
                                    <ellipse cx="15.6677" cy="14.1239" rx="4.42943" ry="4.24752"
                                             :fill="pictogramIconColor(item.severity, 3, 2)"/>
                                    <path
                                        d="M14.9401 4.75508C15.1503 3.84571 16.4507 3.84571 16.6069 4.75508L18.0084 12.9121C18.0988 13.4383 17.6817 13.9296 17.1448 13.9296H13.8586C13.3216 13.9296 12.9337 13.4383 13.0553 12.9121L14.9401 4.75508Z"
                                        :fill="pictogramIconColor(item.severity, 3, 2)"/>
                                  </svg>
                                </div>
                                <div class="pictogram-graphic-block-svgs-block-row-column">
                                  <svg width="30" height="24" viewBox="0 0 30 24" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.51172 9.66589C10.2127 5.8016 17.8533 3.70303 22.2543 9.31193"
                                          :stroke="pictogramIconColor(item.severity, 4, 1)"
                                          stroke-width="0.637602"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56788 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56166 22.0147 7.44244 22.1197 7.3282 22.2204C7.11686 22.4066 6.92257 22.5778 6.77845 22.716C6.37137 23.1063 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33893 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 4, 1)" stroke-width="0.807629"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56789 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56165 22.0147 7.44242 22.1197 7.32818 22.2204C7.11684 22.4066 6.92256 22.5778 6.77845 22.716C6.37137 23.1064 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33894 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 4, 1)" stroke-width="0.807629"/>
                                    <line y1="-0.425068" x2="5.47897" y2="-0.425068"
                                          transform="matrix(-0.466409 -0.884569 0.899813 -0.436276 12.147 6.75256)"
                                          :stroke="pictogramIconColor(item.severity, 4, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.2971" y2="-0.425068"
                                          transform="matrix(0.611069 -0.791577 0.815438 0.578845 20.1543 7.40607)"
                                          :stroke="pictogramIconColor(item.severity, 4, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.41771" y2="-0.425068"
                                          transform="matrix(-0.985293 -0.170873 0.18533 -0.982676 7.48975 11.4901)"
                                          :stroke="pictogramIconColor(item.severity, 4, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.4088" y2="-0.425068"
                                          transform="matrix(-0.923922 0.382581 -0.410602 -0.911815 28.3877 9.80206)"
                                          :stroke="pictogramIconColor(item.severity, 4, 1)" stroke-width="0.850136"/>
                                    <ellipse cx="15.2064" cy="13.1217" rx="4.56191" ry="4.24683"
                                             :fill="pictogramIconColor(item.severity, 4, 2)"/>
                                    <path
                                        d="M25.2763 7.27704C25.9701 7.09122 26.4605 7.95823 25.9033 8.38561L18.2061 14.2895C17.8848 14.5359 17.3973 14.4333 17.1956 14.0768L15.3083 10.7399C15.1067 10.3835 15.2917 9.95119 15.6918 9.84405L25.2763 7.27704Z"
                                        :fill="pictogramIconColor(item.severity, 4, 2)"/>
                                  </svg>
                                </div>
                                <div class="pictogram-graphic-block-svgs-block-row-column">
                                  <svg width="31" height="24" viewBox="0 0 31 24" fill="none"
                                       xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.51172 9.66589C10.2127 5.8016 17.8533 3.70303 22.2543 9.31193"
                                          :stroke="pictogramIconColor(item.severity, 5, 1)"
                                          stroke-width="0.637602"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56788 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56166 22.0147 7.44244 22.1197 7.3282 22.2204C7.11686 22.4066 6.92257 22.5778 6.77845 22.716C6.37137 23.1063 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33893 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 5, 1)" stroke-width="0.807629"/>
                                    <path
                                        d="M15.4997 6.13261L15.4591 6.12885L15.4186 6.13328C11.442 6.56789 8.92057 8.49834 7.91363 11.0635C6.91266 13.6135 7.4488 16.6907 9.37129 19.3504C9.46581 19.4812 9.48962 19.6546 9.37792 19.9331C9.26268 20.2205 9.02557 20.5521 8.70878 20.9047C8.39643 21.2523 8.02966 21.5953 7.68063 21.908C7.56165 22.0147 7.44242 22.1197 7.32818 22.2204C7.11684 22.4066 6.92256 22.5778 6.77845 22.716C6.37137 23.1064 6.0087 23.2756 5.69492 23.3158C5.38443 23.3556 5.07188 23.2756 4.74916 23.073C4.0814 22.6538 3.43913 21.7513 2.88603 20.5999C2.34043 19.4641 1.91086 18.1486 1.6375 16.9806C1.35996 15.7949 1.258 14.8223 1.3247 14.3512L1.32869 14.323V14.2946C1.32869 6.44654 7.33894 0.403876 15.4625 0.403876C19.537 0.403876 23.0664 1.83872 25.5758 4.32029C28.0844 6.80101 29.5963 10.35 29.5963 14.6213C29.5963 18.9875 27.4879 21.9741 26.0085 23.0939C25.7938 23.2564 25.4059 23.2748 24.8019 23.0218C24.224 22.7798 23.5749 22.3383 22.9775 21.8311C22.3819 21.3254 21.862 20.7752 21.5376 20.3359C21.3748 20.1155 21.2777 19.945 21.2365 19.835C23.9633 16.0266 24.0577 12.7198 22.633 10.2759C21.2239 7.85898 18.3913 6.40003 15.4997 6.13261Z"
                                        :stroke="pictogramIconColor(item.severity, 5, 1)" stroke-width="0.807629"/>
                                    <line y1="-0.425068" x2="5.47897" y2="-0.425068"
                                          transform="matrix(-0.466409 -0.884569 0.899813 -0.436276 12.147 6.75256)"
                                          :stroke="pictogramIconColor(item.severity, 5, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.2971" y2="-0.425068"
                                          transform="matrix(0.611069 -0.791577 0.815438 0.578845 20.1543 7.40607)"
                                          :stroke="pictogramIconColor(item.severity, 5, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.41771" y2="-0.425068"
                                          transform="matrix(-0.985293 -0.170873 0.18533 -0.982676 7.48975 11.4901)"
                                          :stroke="pictogramIconColor(item.severity, 5, 1)" stroke-width="0.850136"/>
                                    <line y1="-0.425068" x2="5.4088" y2="-0.425068"
                                          transform="matrix(-0.923922 0.382581 -0.410602 -0.911815 28.3877 9.80206)"
                                          :stroke="pictogramIconColor(item.severity, 5, 1)" stroke-width="0.850136"/>
                                    <ellipse cx="14.8285" cy="13.1204" rx="4.40079" ry="4.24645"
                                             :fill="pictogramIconColor(item.severity, 5, 2)"/>
                                    <path
                                        d="M25.6925 15.9418C26.4744 16.3474 26.1099 17.5316 25.2253 17.4595L16.695 16.7646C16.1833 16.723 15.8459 16.2275 15.9964 15.7386L16.9865 12.5223C17.137 12.0334 17.6999 11.796 18.1523 12.0306L25.6925 15.9418Z"
                                        :fill="pictogramIconColor(item.severity, 5, 2)"/>
                                  </svg>
                                </div>
                              </div>
                              <div class="pictogram-graphic-block-svgs-block-row">
                                <div class="pictogram-graphic-block-svgs-block-description">Schweregrad</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="riskMatrix" v-if="riskMatrix">
                      <div class="pictogram-title">Risikomatrix</div>
                      <div class="pictogram-description">
                        <p>Veränderung des Gesamtrisikos durch getätigte Massnahmen.</p>
                      </div>
                      <div class="pictogram-graphic">
                        <RiskMatrix
                            :probabilityOfOccurrenceBeforeRiskMatrix="item.probabilityOfOccurrenceBefore"
                            :probabilityOfOccurrenceAfterRiskMatrix="item.probabilityOfOccurrenceAfter"
                            :severityRiskMatrix="item.severity"/>
                      </div>
                    </div>
                  </div>
                </div>

                <div class='block block-verify'>
                  <div class='block-title'>Bewertung</div>
                  <div class='block-text decision-evaluation'>
                    <div class='evaluation-text'>Wollen Sie innerhalb der Spezifikation bleiben oder ein Custom Made
                      Device herstellen?
                    </div>
                    <label class="container label-verify">
                      <div class="verify-label-text"> Spezifikation</div>
                      <input type="radio" :name="`evaluation`" :value="`Spezifikation`"
                             v-model="specification_customMadeDevice">
                      <span class="custom_radio_button"></span>
                    </label>
                    <label class="container label-verify">
                      <div class="verify-label-text"> Custom Made Device</div>
                      <input type="radio" :name="`evaluation`" :value="`CustomMadeDevice`"
                             v-model="specification_customMadeDevice">
                      <span class="custom_radio_button"></span>
                    </label>
                  </div>
                </div>

                <!--Nachbearbeitung (in Spezifikation bleiben) -->
                <div v-if="specification_customMadeDevice === 'Spezifikation'">
                  <div class='block block-verify'>
                    <div class='block-title'>Nachbearbeitung</div>
                    <div class='block-text decision-evaluation'>
                      <div class='evaluation-text'>Ist eine Nachbearbeitung des Devices möglich?</div>
                      <label class="container label-verify">
                        <div class="verify-label-text"> Ja</div>
                        <input :name="`postPrcessing`" type="radio" :value="`yes`"
                               v-model="postProcessingPossibility">
                        <span class="custom_radio_button"></span>
                      </label>
                      <label class="container label-verify">
                        <div class="verify-label-text"> Nein</div>
                        <input :name="`postPrcessing`" type="radio" :value="`no`"
                               v-model="postProcessingPossibility">
                        <span class="custom_radio_button"></span>
                      </label>
                    </div>
                  </div>

                  <!--Nachbearbeitung JA-->
                  <div v-if="postProcessingPossibility === 'yes'">
                    <div class="rectangle-block">
                      <div class="detailView-notification">
                        Die Herstellung des Devices ist durch die Nachbearbeitung weiterhin möglich.
                        Fügen Sie zusätzliche Gefährdungen hinzu oder schliessen Sie diese Gefährdung direkt ab.
                      </div>
                    </div>
                    <div class="buttonContainer buttonContainer-detailView">
                      <router-link
                          :to="{ name: 'NewHazard', params: { actualTitleNameNewHazard: actualTitleNameTable, itemIdNewHazard: item.id }}">
                        <button class="button button-cancel">Gefährdung erstellen</button>
                      </router-link>
                      <input @click="numberOfCheckedCheckboxes(item.id, false, true, false)"
                             class="button button-submit button-finishHazard"
                             type="submit" value="Gefährdung abschliessen">
                    </div>
                  </div>

                  <!--Nachbearbeitung NEIN-->
                  <div v-if="postProcessingPossibility === 'no'">
                    <div class="rectangle-block">
                      <div class="detailView-notification">Die Herstellung des Devices muss abgebrochen werden.</div>
                    </div>
                    <div class="buttonContainer buttonContainer-detailView">
                      <button @click="showModal = true" class="button button-cancel">Herstellung abbrechen</button>
                    </div>
                  </div>


                </div>
              </div>

              <!--Custom Made Device (bewusst ausserhalb Spezifikation) -->
              <div class="blocks_custom_made_device"
                   v-if="specification_customMadeDevice === 'CustomMadeDevice'">
                <v-textarea
                    outlined
                    label="Begründung für Custom Made Device"
                    placeholder="Geben Sie eine Erläuterung ein."
                    class="textarea-declaration"
                    rows="2"
                    aria-required="true"
                    v-model="customMadeDeviceDescription"/>
                <div class='block block-verify'>
                  <div class='block-title'>Arztnachweis</div>
                  <div class="block-text">
                    <input class=" inputfile" type="file" name="file" id="file"/>
                  </div>
                </div>
                <div class="buttonContainer">
                  <input @click="accept(item.id)" class="button button-submit" type="submit"
                         :id="`customMadeDeviceSubmit${item.id}`"
                         :disabled="checkCustomMadeDeviceFields(item.id)"
                         value="Gefährdung abschliessen">
                </div>
              </div>

            </form>
          </td>
        </template>
      </v-data-table>
      <!-- The Modal -->
      <div id="myModal" v-if="showModal" class="modal" @click="showModal = false">
        <!-- Modal content -->
        <div class="modal-content" @click.stop="showModal = true">
          <div class="close-span">
            <span class="close" @click.stop="showModal = false">
              <svg class="close-svg" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_2029_82762)">
                <path
                    d="M0.781183 15.9999C0.626645 15.9999 0.47557 15.9541 0.347067 15.8682C0.218564 15.7824 0.118407 15.6604 0.0592641 15.5176C0.000121039 15.3748 -0.0153506 15.2177 0.0148062 15.0662C0.044963 14.9146 0.119393 14.7754 0.228683 14.6661L14.6662 0.228609C14.8127 0.0820767 15.0115 -0.000244141 15.2187 -0.000244141C15.4259 -0.000244141 15.6247 0.0820767 15.7712 0.228609C15.9177 0.375141 16.0001 0.573881 16.0001 0.781109C16.0001 0.988336 15.9177 1.18708 15.7712 1.33361L1.33368 15.7711C1.2612 15.8437 1.17507 15.9013 1.08025 15.9406C0.98544 15.9799 0.883803 16 0.781183 15.9999Z"
                    fill="#32404F"/>
                <path
                    d="M15.2187 15.9999C15.1161 16 15.0144 15.9799 14.9196 15.9406C14.8248 15.9013 14.7387 15.8437 14.6662 15.7711L0.2287 1.33361C0.0821683 1.18708 -0.000152588 0.988336 -0.000152588 0.781109C-0.000152588 0.573881 0.0821683 0.375141 0.2287 0.228609C0.375233 0.0820767 0.573973 -0.000244141 0.7812 -0.000244141C0.988428 -0.000244141 1.18717 0.0820767 1.3337 0.228609L15.7712 14.6661C15.8805 14.7754 15.9549 14.9146 15.9851 15.0662C16.0152 15.2177 15.9998 15.3748 15.9406 15.5176C15.8815 15.6604 15.7813 15.7824 15.6528 15.8682C15.5243 15.9541 15.3732 15.9999 15.2187 15.9999V15.9999Z"
                    fill="#32404F"/>
                </g>
                <defs>
                <clipPath id="clip0_2029_82762">
                <rect width="16" height="16" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            </span>
          </div>
          <div class="modal-content-inner-part">
            <div class="modal-topPart-container">
              <div class="modal-text">Möchten Sie Herstellung des Devices wirklich abbrechen? Der aktuelle Fortschritt
                wird
                dabei zurückgesetzt.
              </div>
            </div>

            <div class="modal-button-container">
              <button @click.stop="showModal = false" class="button button-cancel">Herstellung fortsetzen</button>
              <button @click.stop="showModal = false; cancel()" class="button button-submit button-submit-modal">
                Herstellung
                abbrechen
              </button>
            </div>
          </div>
        </div>
      </div>
    </v-app>
    <div id="toast">
      <div id="desc">{{ toastMessage }}</div>
    </div>
  </div>
</template>

<script>
import RiskMatrix from "@/components/listView/RiskMatrix"

export default {
  components: {
    RiskMatrix,
  },
  props: ['actualTitleNameTable', 'nameCounterTable', 'hazardNameListView'],
  data() {
    return {
      showModal: false,
      hazardNameTable: '',
      hazardSituationTable: '',
      hazardDamageTable: '',
      hazardProbabilityOfOccurenceBeforeTable: '',
      hazardSeverityTable: '',
      hazardMeasuresTable: '',
      hazardProbabilityOfOccurenceAfterTable: '',
      hazardRiskPriorityTableNumber: '',
      hazardRiskPriorityWord: '',
      hazardNewId: null,
      hazardImageNameTable: '',
      hazardOriginalIdTableNumber: null,
      customMadeDeviceDescription: '',
      customMadeDeviceFile: '',
      customMadeDeviceDocument: '',
      toastMessage: 'Gefährdung wurde erfolgreich hinzugefügt.',
      pictogramRows: [
        {pictogramRow: 1, title: "Vor Massnahmen"},
        {pictogramRow: 2, title: "Nach Massnahmen"},
      ],
      svgList: [
        {svgNumber: 1, possibilityOfOccurence: "probabilityOfOccurrenceBefore"},
        {svgNumber: 2, possibilityOfOccurence: "probabilityOfOccurrenceBefore"},
        {svgNumber: 3, possibilityOfOccurence: "probabilityOfOccurrenceBefore"},
        {svgNumber: 4, possibilityOfOccurence: "probabilityOfOccurrenceBefore"},
        {svgNumber: 5, possibilityOfOccurence: "probabilityOfOccurrenceBefore"},
      ],
      idOfFirstElementActualCategory: 0,
      idOfLastElementActualCategory: 0,
      numberOfCurrentCheckboxes: 0,
      numberOfCheckedCheckboxesValue: 0,
      acceptCounter: 0,
      checkedCheckboxesArray: [],
      acceptCounterArray: [],
      sortBy: 'riskPriority',
      sortDesc: true,
      specification_customMadeDevice: null,
      postProcessingPossibility: null,
      riskMatrix: true,
      pictogram: true,
      search: '',
      expanded: [],
      singleExpand: false,
      hazardsHeader: [
        {text: 'Icon', value: 'icon', width: 80, sortable: false},
        {text: 'Risikopriorität', value: 'riskPriority', width: 150, sortable: true},
        {text: 'Definition Gefährdung', align: 'start', value: 'name', width: 800, sortable: true},
        {text: 'Nicht zutreffend', value: 'nicht-zutreffend', width: 100, sortable: false},
        {text: 'Akzeptiert', value: 'akzeptiert', width: 80, sortable: false},
        {text: 'Gefährdung verifizieren', value: 'data-table-expand', width: 80},
      ],
      hazards: [
        {
          id: 1,
          categoryId: 1,
          name: "Designvorgabe Mindestdicke kann nicht eingehalten werden. - Dicke des Implantsts zu dünn.",
          imageName: require('../../assets/svg/table_icons/toThin.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat bricht aufgrund der zu kleinen Mindestdicke.",
          damage: "Zweitoperation",
          probabilityOfOccurrenceBefore: 3,
          severity: 3,
          measures: [
            {description: 'Erfüllen der Belastungstests (DFMEA-D16)'},
          ],
          probabilityOfOccurrenceAfter: 2,
        },
        {
          id: 2,
          categoryId: 1,
          name: "Designvorgabe Mindestdicke kann nicht eingehalten werden. - Implantat nicht formstabil.",
          imageName: require('../../assets/svg/table_icons/dimensionally_unstable.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat bleibt nicht formstabil bei der Implantierung was zu einer schlechten Passgenauigkeit führt.",
          damage: "Schädigung der Weichteile / Sehnervs",
          probabilityOfOccurrenceBefore: 3,
          severity: 4,
          measures: [
            {description: 'Erfüllen der Belastungstests (DFMEA-D16)'},
          ],
          probabilityOfOccurrenceAfter: 2,
        },
        {
          id: 3,
          categoryId: 1,
          name: "Designvorgabe Anzahl Schraubenlöcher kann nicht eingehalten werden.",
          imageName: require('../../assets/svg/table_icons/nut.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat löst sich nach der Implantation unter Last, aufgrund ungenügender Verankerung.",
          damage: "Schädigung der Weichteile / Sehnervs",
          probabilityOfOccurrenceBefore: 3,
          severity: 4,
          measures: [
            {description: 'Einen Standardschraubentyp aus ähnlichen Indikationen verwenden  und unter Belastung testen  (DFMEA-D14)'},
          ],
          probabilityOfOccurrenceAfter: 1,
        },
        {
          id: 4,
          categoryId: 1,
          name: "Designvorgabe Platzierung der Schraubenlöcher kann nicht eingehalten werden.",
          imageName: require('../../assets/svg/table_icons/nut.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat bricht aufgrund der zu nahen Schrauben am Implantatrand.",
          damage: "Zweitoperation",
          probabilityOfOccurrenceBefore: 3,
          severity: 3,
          measures: [
            {description: 'Erfüllen der Belastungstests (DFMEA-D16)'},
          ],
          probabilityOfOccurrenceAfter: 1,
        },
        {
          id: 5,
          categoryId: 1,
          name: "Designvorgabee Schraubentyp/Durchmesser/Länge kann nicht eingehalten werden.",
          imageName: require('../../assets/svg/table_icons/screw.svg'),
          riskPriority: "1 gering",
          hazardDetailDescription: "Stabilitätsverlust bei Fixierung weil Schraubentyp und -dimension nicht zur Implantatdimension und dem zu erwartenden Lastfall passen.",
          damage: "Verlängerung der OP, Leiden des Patienten.",
          probabilityOfOccurrenceBefore: 3,
          severity: 2,
          measures: [
            {description: 'Einen Standardschraubentyp aus ähnlichen Indikationen verwenden  und unter Belastung testen  (DFMEA-D14).'},
          ],
          probabilityOfOccurrenceAfter: 1,
        },
        {
          id: 6,
          categoryId: 2,
          name: "Bauteile können nicht diagonal zum Gasstrom auf der Bauplattform platziert werden.",
          imageName: require('../../assets/svg/table_icons/not_diagonal_placable.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat bricht durch Gefügefehler (Reduzierte mechansiche Festigkeit) aufgrund Schweissspritzer von benachbarten Bauteile.",
          damage: "Zweitoperation",
          probabilityOfOccurrenceBefore: 3,
          severity: 3,
          measures: [
            {description: 'Zum Gasstrom hin diagonale Platzierung der Implantate auf der Bauplattform gemäss SOP.'},
          ],
          probabilityOfOccurrenceAfter: 1,
        },
        {
          id: 7,
          categoryId: 2,
          name: "Verunreinigte Bauplattform.",
          imageName: require('../../assets/svg/table_icons/contaminated_building_platform.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Verunreinigungen gelangen ins Bauteil und schliesslich in den Patienten.",
          damage: "Infektion, ungewollte Immunreaktion",
          probabilityOfOccurrenceBefore: 2,
          severity: 4,
          measures: [
            {description: 'Ordnungsgemässe Lagerung der Bauplattform gemäss SOP.'},
            {description: 'Vor Gebrauch die Bauplattform mit Isopropanol reinigen gemäss SOP.'},
          ],
          probabilityOfOccurrenceAfter: 1,
        },
        {
          id: 8,
          categoryId: 2,
          name: "Bauplattform ist nicht aus demselben Material wie das Baumaterial.",
          imageName: require('../../assets/svg/table_icons/not_same_material.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Ordnungsgemässe Lagerung der Bauplattform gemäss SOP. Vor Gebrauch die Bauplattform mit G23.",
          damage: "Ordnungsgemässe Lagerung der Bauplattform gemäss SOP \n" +
              "\n" +
              "Vor Gebrauch die Bauplattform mit G23",
          probabilityOfOccurrenceBefore: 2,
          severity: 4,
          measures: [
            {description: 'Vor Gebrauch die Bauplattform bezüglich Material überprüfen.'},
          ],
          probabilityOfOccurrenceAfter: 1,
        },
        {
          id: 9,
          categoryId: 2,
          name: "Die Beschichterlippe ist abgenutzt.",
          imageName: require('../../assets/svg/table_icons/coater_flap_worn.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat ist nicht formschlüssig - passt nicht mehr aufgrund verschlechtertem Schichtaufbau.",
          damage: "Schädigung der Weichteile / Sehnervs",
          probabilityOfOccurrenceBefore: 3,
          severity: 4,
          measures: [
            {description: 'Geschultes Personal.'},
            {description: 'Visuelle Prüfung  des Pulverausstrichs bei der zuletzt gebauten  Schicht gemäss SOP.'},
            {description: 'Soll-Ist Vergleich mittels 3D-Scan bei der Type Examination gemäss SOP.'},
          ],
          probabilityOfOccurrenceAfter: 2,
        },
        {
          id: 10,
          categoryId: 2,
          name: "Der Beschichter kollidiert mit aus dem Pulverbett ragenden Bauteilstrukturen.",
          imageName: require('../../assets/svg/table_icons/coater_collides.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat ist nicht formschlüssig - passt nicht mehr aufgrund einer Verschiebung der Bauteilstruktur oder Ablösung von der  Supportstruktur.",
          damage: "Schädigung der Weichteile / Sehnervs",
          probabilityOfOccurrenceBefore: 3,
          severity: 4,
          measures: [
            {description: 'Bei harten Kollisionen bricht die Anlage den Baujob selber ab.'},
            {description: 'Soll-Ist Vergleich mittels 3D-Scan bei der Type Examination'},
          ],
          probabilityOfOccurrenceAfter: 2,
        },
        {
          id: 11,
          categoryId: 2,
          name: "Fehlerhafter Schichtaufbau.",
          imageName: require('../../assets/svg/table_icons/faulty_layer_structure.svg'),
          riskPriority: "2 mittel",
          hazardDetailDescription: "Implantat bricht durch Gefügefehler (Reduzierte mechanische Festigkeit) aufgrund  von Fehlern im Schichtaufbau verursacht durch ungleichmässig ausgestrichenes Pulver.",
          damage: "Zweitoperation",
          probabilityOfOccurrenceBefore: 3,
          severity: 3,
          measures: [
            {description: 'SLM Anlage verfügt über ein Layer Control System, das bei fehlerhaften Beschichtung den Vorgang vor dem Belichtung wiederholt.'},
            {description: 'Bei mehrfach fehlerhafter Beschichtung muss der Baujob erneut aufgesetzt und ausgeführt werden.'},
          ],
          probabilityOfOccurrenceAfter: 2,
        }
      ],
      hazardsSliced: null,
    }
  },
  watch: {
    hazardOriginalIdTableNumber: function () {
      if (this.hazardNameTable !== "") {
        switch (this.hazardRiskPriorityTableNumber) {
          case 1:
            this.hazardRiskPriorityWord = 'gering'
            break
          case 2:
            this.hazardRiskPriorityWord = 'mittel'
            break
          case 3:
            this.hazardRiskPriorityWord = 'hoch'
            break
        }
        this.hazardNewId = this.hazards.length + 1
        this.hazards.push({
          id: this.hazardNewId,
          categoryId: this.nameCounterTable + 1,
          name: this.hazardNameTable,
          imageName: this.hazardImageNameTable,
          riskPriority: this.hazardRiskPriorityTableNumber + ' ' + this.hazardRiskPriorityWord,
          hazardDetailDescription: this.hazardSituationTable,
          damage: this.hazardDamageTable,
          probabilityOfOccurrenceBefore: this.hazardProbabilityOfOccurenceBeforeTable,
          severity: this.hazardSeverityTable,
          measures: this.hazardMeasuresTable,
          probabilityOfOccurrenceAfter: this.hazardProbabilityOfOccurenceAfterTable,
        })
        switch (this.nameCounterTable) {
          case 0:
            this.hazardsSliced = this.hazards.filter(priority => priority.categoryId === 1)
            break
          case 1:
            this.hazardsSliced = this.hazards.filter(priority => priority.categoryId === 2)
            break
        }
        this.toastMessage = 'Gefährdung wurde erfolgreich hinzugefügt.'
      } else {
        this.toastMessage = 'Gefährdung wurde erfolgreich verifiziert.'
      }
      this.launch_notification()
      this.numberOfCheckedCheckboxes(this.hazardOriginalIdTableNumber, false, true, true)
    },
    nameCounterTable: function () {
      let oldCategoryId
      //for case: nameCounterTable = 0, category = 1 before
      if (this.nameCounterTable === 1) {
        oldCategoryId = 1
      }
      //for case: nameCounterTable = 1, category = 2 before
      else if (this.nameCounterTable === 0) {
        oldCategoryId = 2
      }

      this.idOfFirstElementActualCategory = this.hazards.find(priority => priority.categoryId === oldCategoryId).id
      this.idOfLastElementActualCategory = this.hazards.find(priority => priority.categoryId === oldCategoryId).id + this.hazards.filter(priority => priority.categoryId === oldCategoryId).length
      for (let i = this.idOfFirstElementActualCategory; i < this.idOfLastElementActualCategory; i++) {
        if (document.getElementById("confirm" + i) !== null) {
          document.getElementById("confirm" + i).checked = false
        }
      }

      switch (this.nameCounterTable) {
        case 0:
          this.hazardsSliced = this.hazards.filter(priority => priority.categoryId === 1)
          break
        case 1:
          this.hazardsSliced = this.hazards.filter(priority => priority.categoryId === 2)
          break
      }

      this.deleteNotSavedNewHazardInCheckedCheckboxArray()
      this.numberOfCheckedCheckboxes(null, true, false, false)
    },
  },
  created() {
    if (localStorage.checkedCheckboxesArray === undefined || localStorage.checkedCheckboxesArray === '') {
      localStorage.checkedCheckboxesArray = JSON.stringify([])
    }
    if (localStorage.acceptCounterArray === undefined || localStorage.acceptCounterArray === '') {
      localStorage.acceptCounterArray = JSON.stringify([])
    }

    if (this.nameCounterTable === 0) {
      this.hazardsSliced = this.hazards.filter(priority => priority.categoryId === 1)
    }
    let nameCounterLocalStorageVariable = parseInt(localStorage.nameCounter, 10)
    if (this.nameCounterTable === nameCounterLocalStorageVariable || localStorage.nameCounter === undefined) {
      this.deleteNotSavedNewHazardInCheckedCheckboxArray()
    }
  },
  mounted() {

    if (window.location.href !== 'http://localhost:8080/index.html?evaluation=Spezifikation&postPrcessing=no#/') {
      window.location.href = 'http://localhost:8080/index.html?evaluation=Spezifikation&postPrcessing=no#/'
      console.log("test")
    }
    if (this.$route.params.hazardOriginalIdListView !== undefined) {
      this.hazardOriginalIdTableNumber = this.$route.params.hazardOriginalIdListView
    }
    if (this.$route.params.hazardNameListView !== undefined) {
      this.hazardNameTable = this.$route.params.hazardNameListView
      this.hazardSituationTable = this.$route.params.hazardSituationListView
      this.hazardDamageTable = this.$route.params.hazardDamageListView
      this.hazardProbabilityOfOccurenceBeforeTable = this.$route.params.hazardProbabilityOfOccurenceBeforeListView
      this.hazardSeverityTable = this.$route.params.hazardSeverityListView
      this.hazardMeasuresTable = this.$route.params.hazardMeasuresListView
      this.hazardProbabilityOfOccurenceAfterTable = this.$route.params.hazardProbabilityOfOccurenceAfterListView
      this.hazardRiskPriorityTableNumber = this.$route.params.hazardRiskPriorityListView
      this.hazardOriginalIdTableNumber = parseInt(this.hazardOriginalIdTableNumber, 10)
      this.hazardImageNameTable = this.hazards.find(hazard => hazard.id === this.hazardOriginalIdTableNumber).imageName
    }
    this.numberOfCheckedCheckboxes(null, true, false, false)
  },
  methods: {
    deleteNotSavedNewHazardInCheckedCheckboxArray() {
      if (localStorage.checkedCheckboxesArray !== undefined || localStorage.checkedCheckboxesArray !== '') {
        for (let i = 0; i < JSON.parse(localStorage.checkedCheckboxesArray).length; i++) {
          let partOf = false
          for (let j = 0; j < this.hazardsSliced.length; j++) {
            if (JSON.parse(localStorage.checkedCheckboxesArray)[i] === this.hazardsSliced[j].id) {
              partOf = true
            }
          }
          if (partOf === false) {
            const index = JSON.parse(localStorage.checkedCheckboxesArray).indexOf(JSON.parse(localStorage.checkedCheckboxesArray)[i])
            if (index !== -1) {
              let a = JSON.parse(localStorage.checkedCheckboxesArray)
              a.splice(index, 1)  // 2nd parameter means remove one item only
              localStorage.checkedCheckboxesArray = JSON.stringify(a)
            }
          }
        }
      }
    },
    launch_notification() {
      let notification = document.getElementById("toast")
      notification.className = "show"
      setTimeout(() => {
        notification.className = notification.className.replace("show", "")
      }, 4000)
    },
    moveCheckmark(elementId, element, action, time) {
      let actualAcceptedCheckmarkDiv = document.getElementById(element + elementId)
      actualAcceptedCheckmarkDiv.classList.add(action)
      setTimeout(() =>
          actualAcceptedCheckmarkDiv.classList.remove(action), time
      )
    },
    checkCustomMadeDeviceFields(itemId) {
      if (document.getElementById("customMadeDeviceSubmit" + itemId) !== null && document.getElementById("customMadeDeviceSubmit" + itemId) !== undefined && document.getElementById("customMadeDeviceSubmit" + itemId) !== "undefined") {
        // var actualCustomMadeDeviceSubmit = document.getElementById("customMadeDeviceSubmit" + itemId)
      }
      if (this.customMadeDeviceDescription === '') {
        if (document.getElementById("customMadeDeviceSubmit" + itemId) !== null && document.getElementById("customMadeDeviceSubmit" + itemId) !== undefined
            && document.getElementById("customMadeDeviceSubmit") !== undefined && document.getElementById("customMadeDeviceSubmit" + itemId) !== "undefined") {
          // actualCustomMadeDeviceSubmit.style.background = "red"
        }
        return true
      } else {
        // actualCustomMadeDeviceSubmit.style.background = "#339C74"
        return false
      }
    },
    numberOfCheckedCheckboxes(itemId, acceptStatus, specification, newItem) {
      console.log(localStorage.checkedCheckboxesArray)
      if (localStorage.checkedCheckboxesArray === undefined || localStorage.checkedCheckboxesArray === '') {
        localStorage.checkedCheckboxesArray = JSON.stringify([])
      }
      if (localStorage.acceptCounterArray === undefined || localStorage.acceptCounterArray === '') {
        localStorage.acceptCounterArray = JSON.stringify([])
      }
      this.checkedCheckboxesArray = JSON.parse(localStorage.checkedCheckboxesArray)
      this.acceptCounterArray = JSON.parse(localStorage.acceptCounterArray)

      // If checkbox "nicht" zutreffend" is selected
      if (!acceptStatus && !specification && itemId !== null) {
        let actualCheckbox = document.getElementById("confirm" + itemId)
        if (actualCheckbox.checked === true) {
          this.checkedCheckboxesArray.push(itemId)
        } else {
          const index = this.checkedCheckboxesArray.indexOf(itemId)
          this.checkedCheckboxesArray.splice(index, 1)  // 2nd parameter means remove one item only
        }
      }

      //If accept-Icon is set and should be unset after checkbox is checked
      if (itemId !== null) {
        if (this.acceptCounterArray.includes(itemId) && acceptStatus === false) {
          this.acceptCounter--
          //Accept-Array
          const index = this.acceptCounterArray.indexOf(itemId)
          this.acceptCounterArray.splice(index, 1)  // 2nd parameter means remove one item only
        }
        this.$forceUpdate()
      }

      // For Specification
      if (specification) {
        let checkbox = document.getElementById("confirm" + itemId)
        if (!localStorage.checkedCheckboxesArray.includes(itemId)) {
          if (checkbox != null) {
            checkbox.checked = true
          }
          this.checkedCheckboxesArray.push(itemId)
        }
        this.expanded = []
        if (!newItem) {
          this.toastMessage = 'Gefährdung wurde erfolgreich verifiziert.'
          this.launch_notification()
        }
      }

      //General Settings
      localStorage.checkedCheckboxesArray = JSON.stringify(this.checkedCheckboxesArray)
      localStorage.acceptCounterArray = JSON.stringify(this.acceptCounterArray)
      this.specification_customMadeDevice = null
      this.postProcessingPossibility = null
      this.customMadeDeviceDescription = ''

      this.numberOfCurrentCheckboxes = this.hazards.filter(priority => priority.categoryId === (this.nameCounterTable + 1)).length
      var numberFinished = JSON.parse(localStorage.checkedCheckboxesArray).length + JSON.parse(localStorage.acceptCounterArray).length
      this.$emit('ReadCheckboxNumber', numberFinished, this.numberOfCurrentCheckboxes)

      let acceptCounterArrayLength = JSON.parse(localStorage.acceptCounterArray).length
      this.$emit('CustomMadeProcessSettings', acceptCounterArrayLength)
    },
    accept(itemId) {
      this.customMadeDeviceDescription = ''

      if (!this.acceptCounterArray.includes(itemId)) {
        this.acceptCounterArray.push(itemId)
        this.acceptCounter++
        document.getElementById("confirm" + itemId).checked = false

        if (this.checkedCheckboxesArray.includes(itemId)) {
          const index = this.checkedCheckboxesArray.indexOf(itemId)
          this.checkedCheckboxesArray.splice(index, 1)  // 2nd parameter means remove one item only
        }

        localStorage.checkedCheckboxesArray = JSON.stringify(this.checkedCheckboxesArray)
        localStorage.acceptCounterArray = JSON.stringify(this.acceptCounterArray)
      }

      this.toastMessage = 'Gefährdung wurde erfolgreich verifiziert.'
      this.launch_notification()

      this.expanded = []
      this.numberOfCheckedCheckboxes(itemId, true, false, false)
      this.moveCheckmark(itemId, 'accepted', 'apply-resize', 1000)
    },
    itemIdPartOfCheckedCheckboxesArray(itemId) {
      if (localStorage.checkedCheckboxesArray !== '') {
        let newCheckedCheckboxesArray = JSON.parse(localStorage.checkedCheckboxesArray)
        if (newCheckedCheckboxesArray.includes(itemId)) {
          return true
        }
      }
      return false
    },
    itemIdPartOfacceptCounterArray(itemId) {
      if (localStorage.acceptCounterArray !== '') {
        let newAcceptCounterArray = JSON.parse(localStorage.acceptCounterArray)
        if (newAcceptCounterArray.includes(itemId)) {
          return 1.0
        }
      }
      return 0.2
    },
    cancel() {
      localStorage.checkedCheckboxesArray = ''
      localStorage.acceptCounterArray = ''

      this.specification_customMadeDevice = null
      this.postProcessingPossibility = null
      this.customMadeDeviceDescription = ''

      let nameCounterTableValue = 0
      this.$emit("updateNumber", nameCounterTableValue)
      this.numberOfCheckedCheckboxes(null, false, false, false)
      this.expanded = []
      this.showModal = false

      this.toastMessage = 'Aktueller Fortschrittstand wurde zurückgesetzt.'
      this.launch_notification()
    },
    pictogramIconColor(itemNumber, svgNumber, activeColor) {
      if (svgNumber <= itemNumber) {
        if (activeColor === 1) {
          return "#32404F"
        } else {
          return "#687D99"
        }
      } else {
        return "#E1E5EB"
      }
    },
  }
}
</script>